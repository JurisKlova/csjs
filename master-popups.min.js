window.MasterPopups=function(e,o,t,n){function i(o,t){var n=this;return n.$body=e("body"),n.popup=o,n.$popup=e(n.popup),n.popup_id=0,n.$container=n.$popup.closest(".mpp-container"),n.$wrap=n.$popup.find(".mpp-wrap").first(),n.$wrap_content=n.$wrap.find(".mpp-content").first(),n.$desktop_content=n.$wrap.find(".mpp-content-desktop").first(),n.$mobile_content=n.$wrap.find(".mpp-content-mobile").first(),n.$wp_editor_content=n.$wrap.find(".mpp-content-wp-editor").first(),n.$device_contents=n.$popup.find(".mpp-content-desktop, .mpp-content-mobile"),n.$elements=n.$popup.find(".mpp-element"),n.$overlay=n.$container.find(".mpp-overlay"),n.$sticky=n.$container.find(".mpp-sticky"),n.is_open=!1,n.is_opening=!1,n.is_closing=!1,n.showPopup=!0,n.metadata={},n.defaults={id:0,position:"middle-center",fullScreen:!1,mobileDesign:!1,ratioSmallDevices:1,list:{service:""},afterConversion:{message:""},wpEditor:{enabled:!1,autoHeight:!1,padding:"20px 36px"},sound:{enabled:!1,delay:-10,src:""},preloader:{show:!0,duration:1e3},open:{event:"click",delay:0,duration:800,animation:"mpp-zoomIn",disablePageScroll:!1,loadCounter:0},close:{delay:0,duration:700,animation:"mpp-zoomOut"},overlay:{show:!0,durationIn:300,durationOut:250},notificationBar:{fixed:!0,pushPageDown:!0},sticky:{enabled:!1,initial:!1,vertical:!1},inline:{shouldClose:!1},desktop:{device:"desktop",browserWidth:1e3,browserHeight:580,width:800,widthUnit:"px",height:400,heightUnit:"px"},mobile:{device:"mobile",browserWidth:600,browserHeight:580,width:500,widthUnit:"px",height:300,heightUnit:"px"},callbacks:{beforeOpen:function(e,o,t,n){},afterOpen:function(e,o,t,n){},beforeClose:function(e,o,t,n){},afterClose:function(e,o,t,n){},onSubmit:function(e,o,t,n,i){},resize:function(e,o,t,n){}},triggers:{open:{onLoad:{enabled:!1,delay:1e3},onExit:{enabled:!1},onInactivity:{enabled:!1,period:6e4},onScroll:{enabled:!1,amount:"0%",afterPost:!1,selector:"",displayed:!1}},close:{onClickOverlay:!0,onEscKeydown:!0,automatically:{enabled:!1,delay:1e4},onScroll:{enabled:!1,amount:"10%"},onScrollUp:{enabled:!1,amount:"10%"}}},cookies:{loadCounter:{name:""},onLoad:{enabled:!1},onExit:{enabled:!1},onInactivity:{enabled:!1},onScroll:{enabled:!1},onConversion:{enabled:!1}},custom_cookies:{}},n.has_popup()&&(n.metadata=n.$popup.data("popup")||{}),n.options=e.extend(!0,{},n.defaults,t,n.metadata),n.options.id=n.options.id||n.$popup.data("popup-id"),n.popup_id=n.options.id,n.options.open_delay=r.parse_number(n.options.open.delay)+n.duration_preloader_and_overlay(),n.set_options_to_data(n.options),n.init(),n.events(),n.open(),this}function p(e,o){console.log(e,o)}function s(e){r.debug&&console.log(e)}function a(){var o=e(".public-popup-templates"),t=o.find(".mpp-control-popup-templates"),n=o.find(".mpp-wrap-popup-templates"),i=o.find(".mpp-categories-popup-templates"),p=o.find(".mpp-tags-popup-templates");t.on("click","ul li",function(o){var t=e(this);t.addClass("mpp-active").siblings().removeClass("mpp-active");var s=i.length?i.find(".mpp-active").data("filter"):"all",a=p.length?p.find(".mpp-active").data("filter"):"all";"category"==t.data("group")&&p.length&&p.find('li[data-filter="all"]').trigger("click");var r=n.find(".mpp-item-popup-template").filter(function(o){var t=e(this).data("category"),n=e(this).data("tags");return t.indexOf(s)>-1&&n.indexOf(a)>-1});n.fadeTo(150,.15),n.find(".mpp-item-popup-template").fadeOut(400).removeClass("mpp-scale-1"),setTimeout(function(){r.fadeIn(350).addClass("mpp-scale-1"),n.fadeTo(300,1)},300)}),n.on("click",".mpp-item-popup-template",function(e){})}var r={callbacks:[],popups:[],queue_popups:[],opened_popups:[],working:0,last_open_event:"click",is_scrolling_down:!1};e(function(n){var i=parseInt(MPP_PUBLIC_JS.popups_z_index,10),p=parseInt(MPP_PUBLIC_JS.sticky_z_index,10);r.debug="on"===MPP_PUBLIC_JS.debug_mode,r.z_index={overlay:i-1,popup:i,sticky:p},r.enable_enqueue_popups=MPP_PUBLIC_JS.enable_enqueue_popups,e.each(MPP_POPUP_OPTIONS,function(e){r.popups.unshift(e)}),e.each(r.popups,function(n,i){var p=MPP_POPUP_OPTIONS[i],s=!1,a=r.has_cookie_not_show_popup(i),c=p.triggers.open.onClick,u=[];u.push(".mpp-trigger-popup-"+i),u.push('a[href="mpp-trigger-popup-'+i+'"]'),u.push('a[href="#mpp-trigger-popup-'+i+'"]'),c.customClass&&(e("."+c.customClass).css("cursor","pointer"),u.push("."+c.customClass),u.push('a[href="'+c.customClass+'"]'),u.push('a[href="#'+c.customClass+'"]')),u=u.join(",");var l="hover"==c.event?"mouseover":"click";if(e(u).on(l,function(e){c.preventDefault&&e.preventDefault(),p.open.event="click",r.open_popup_by_id(i,p)}),!a){var d=r.create_cookie_loads_counter(i);if(!(d.loadCounter>=1&&d.pageViews<d.loadCounter)&&r.show_popup_on_conversion(p)&&(e(".mpp-inline-"+i).MasterPopups(p),"undefined"==typeof CookiePlus||CookiePlus.should_display_popup(i,p))){s=!1;var _=p.triggers.open.onLoad;_.enabled&&!MPP_PUBLIC_JS.is_admin&&e(o).on("load",function(e){s=!0,setTimeout(function(){!r.get_cookie_event("onLoad",p)&&r.show_popup_on_conversion(p)||(s=!1),s&&(p.open.event="onLoad",r.open_popup_by_id(i,p))},r.parse_number(_.delay))}),s=!1;p.triggers.open.onExit.enabled&&!MPP_PUBLIC_JS.is_admin&&e(t).on("mouseleave",function(e){s=!0,(r.isIE()&&e.clientY>50||!r.isIE()&&e.clientY>0)&&(s=!1),!r.get_cookie_event("onExit",p)&&r.show_popup_on_conversion(p)||(s=!1),s&&(p.open.event="onExit",r.open_popup_by_id(i,p))}),s=!1;var f=p.triggers.open.onInactivity;f.enabled&&!MPP_PUBLIC_JS.is_admin&&setTimeout(function(){e(t).idle({idle:r.parse_number(f.period),onIdle:function(){s=!0,!r.get_cookie_event("onInactivity",p)&&r.show_popup_on_conversion(p)||(s=!1),s&&(p.open.event="onInactivity",r.open_popup_by_id(i,p))}})},1500),s=!1;var m=p.triggers.open.onScroll;m.enabled&&!MPP_PUBLIC_JS.is_admin&&e(o).scroll(function(){s=!0;var o=r.get_instance(i);(m.displayed||o&&o.is_closing)&&(s=!1),!r.get_cookie_event("onScroll",p)&&r.show_popup_on_conversion(p)||(s=!1),"0px"!=m.amount&&"0%"!=m.amount&&s&&r.is_scrolling_down&&r.in_scroll_top(m.amount)&&(p.open.event="onScroll",r.open_popup_by_id(i,p),m.displayed=!0),m.afterPost&&s&&r.in_scroll_element(e(".mpp-after-post-content"),"bottom")&&(p.open.event="onScroll",r.open_popup_by_id(i,p),m.displayed=!0),m.selector&&e(m.selector).length&&s&&r.in_scroll_element(e(m.selector))&&(p.open.event="onScroll",r.open_popup_by_id(i,p),m.displayed=!0)})}}})}),e(t).on("keydown",function(o){27==o.which&&e(".mpp-is-open").each(function(t,n){var i=r.get_instance(e(n));i.options.triggers.close.onEscKeydown&&!i.is_inline()&&i.close(o)})});var c=0,u=0;return e(o).scroll(function(o){c=e(this).scrollTop(),r.is_scrolling_down=c>u,u=c,e(".mpp-is-open").each(function(t,n){var i=r.get_instance(e(n)),p=i.options.triggers.close.onScroll,s=i.options.triggers.close.onScrollUp;r.is_scrolling_down&&p.enabled&&r.in_scroll_top(p.amount)&&i.close(o),!r.is_scrolling_down&&s.enabled&&r.in_scroll_top(s.amount,"<=")&&(i.close(o),MPP_POPUP_OPTIONS[i.options.id]&&(MPP_POPUP_OPTIONS[i.options.id].triggers.open.onScroll.displayed=!1))})}),i.prototype={has_popup:function(){return this.$popup.length>0},set_options_to_data:function(e){var o=this;o.has_popup()&&o.$popup.data("popup",e)},init:function(){var e=this;e.init_elements(),e.build_link_powered_by(),e.has_overlay()&&e.options.preloader.show&&e.build_preloader(e.$overlay)},init_elements:function(){this.$elements.each(function(o,t){var n=e(this).data("actions");n.onclick&&"default"!=n.onclick.action&&e(t).css("cursor","pointer"),"countdown"===e(t).data("type")&&($countdown=e(t).find(".mpp-countdown"),$countdown.length&&"function"==typeof e.fn.MasterPopupsCountdown&&$countdown.MasterPopupsCountdown())})},build_preloader:function(e){var o=this;e.append('<div class="mpp-preloader"></div>'),o.is_support_css_property("animation")?e.find(".mpp-preloader").addClass("mpp-preloader-animation").html('<div class="mpp-preloader-spinner1"></div><div class="mpp-preloader-spinner2"></div>'):e.find(".mpp-preloader").addClass("mpp-preloader-image")},build_link_powered_by:function(){var e=this;e.$popup.find(".cookieplus-wrap-link-powered-by").length&&e.$popup.find(".mpp-wrap-link-powered-by").remove()},events:function(){var n=this;n.$popup.on("mpp_changed_device",n.on_changed_device),n.on_click_elements(),n.close_popup_events(),n.video_events(),n.form_events(),n.sticky_events(),n.countdown_events(),e(o).on("resize",function(){n.is_open&&(n.set_dynamic_styles("onResize"),n.call_function("resize",n.options.callbacks.resize))}),e(o).scroll(function(){n.is_open&&n.notification_bar_styles()}),n.$popup.find(".mpp-input, .mpp-select, .mpp-textarea").on("focus",function(e){r.working=n.popup_id}),n.$popup.on("hover",function(e){r.working=n.popup_id}),e(t).on("click",function(o){0===e(o.target).closest(".mpp-container").length&&(r.working=0)})},on_changed_device:function(e,o,t,n){o.restore_video_poster_and_stop_videos(n)},sticky_events:function(){var e=this;e.options.sticky.enabled&&e.$sticky.on("click",".mpp-sticky-control",function(o){e.options.open.event="click",e.open(),e.$sticky.fadeOut(150)})},countdown_events:function(){"function"==typeof e.fn.MasterPopupsCountdown&&MasterPopupsCountdown.on("finish",function(o,t){setTimeout(function(){$popup=o.$el.closest(".mpp-box"),$popup.length&&$popup.find(".mpp-countdown-message").length&&$popup.find(".mpp-element-countdown").fadeOut(400,function(){e(this).addClass("mpp-hide"),$popup.find(".mpp-countdown-message").fadeIn()})},2500)})},on_click_elements:function(){var o=this;o.$popup.on("click",".mpp-element",function(t){var n=e(this).data("actions");if(n.onclick){switch(n.onclick.action){case"close-popup":t.preventDefault(),o.close(t);break;case"open-popup":case"open-popup-and-not-close":t.preventDefault(),"open-popup"==n.onclick.action&&o.close(t);var i=n.onclick.popup_id;MPP_POPUP_OPTIONS[i]&&(MPP_POPUP_OPTIONS[i].open.event="click",r.open_popup_by_id(i));break;case"redirect-to-url":t.preventDefault(),n.onclick.url&&"#"!=n.onclick.url&&"http://"!=n.onclick.url&&r.redirect(n.onclick.url,n.onclick.target,500)}n.onclick.cookie_name&&r.set_custom_cookies_on_event(o.popup_id,"click",n.onclick.cookie_name)}})},close_popup_events:function(){var e=this;e.$container.on("click",".mpp-element-close-icon, .mpp-close-popup",function(o){o.preventDefault(),e.close(o)}),e.has_overlay()&&e.options.triggers.close.onClickOverlay&&(e.$overlay.addClass("mpp-overlay-close-popup"),e.$overlay.on("click",function(o){e.close(o)}))},video_events:function(){this.$popup.find(".mpp-element-video").on("click",".mpp-video-poster .mpp-play-icon",function(o){e(this).parent(".mpp-video-poster").css("display","none");var t,n=e(this).closest(".mpp-element").find(".mpp-wrap-video");"html5"==n.data("video-type")?(t=n.find("video").first(),videojs(t.attr("id")).play()):(t=n.find("iframe").first(),t.attr("src",t.data("src")))})},form_events:function(){var o=this;o.valid_characters_events(),o.$popup.find(".mpp-element-field_submit").on("keypress",function(o){13===o.which&&e(this).trigger("click")}),o.$popup.find(".mpp-element-field_submit").on("click",function(t){o.$popup.removeClass("mpp-form-sent-ok");var n=e(this),i=o.build_processing_form(),p=i.find(".mpp-processing-form-content"),s=o.get_device_content(n.data("device"));i.fadeIn(200,function(e){o.hide_popup_content(),"none"==o.$popup.data("form-type")?setTimeout(function(){p.html('Please define the "Form Type". Go your popup options and in "Form Type" choose Subscription Form or Contact Form.'),o.remove_preloader_processing_form()},1800):o.validate_form(t,s)?o.process_form(t,s,i):setTimeout(function(){o.remove_processing_form()},1800)})}),o.$popup.find(".mpp-input, .mpp-select, .mpp-textarea").on("focus",function(o){e(this).removeClass("mpp-error"),e(this).closest(".mpp-element").removeClass("mpp-has-error").find(".mpp-error-warning").remove()}),o.$popup.find(".mpp-element-custom_field_input_checkbox label, .mpp-element-custom_field_input_checkbox_gdpr label").on("click touchstart",function(o){e(this).find(".mpp-checkbox").removeClass("mpp-error"),e(this).closest(".mpp-element").removeClass("mpp-has-error").find(".mpp-error-warning").remove()}),o.$popup.on("click",".mpp-back-to-form",function(e){o.remove_processing_form()})},valid_characters_events:function(){var o=this,t=".mpp-element-field_first_name,.mpp-element-field_last_name,.mpp-element-custom_field_input_text,.mpp-element-field_phone";o.$popup.find(".mpp-input").on("keydown",function(o){var n=e(this),i=n.data("valid-characters");n.closest(t).length&&"all"!=i&&!r.is_control_keypress(o)&&("not-numbers"==i&&r.is_number_keypress(o)?o.preventDefault():("only-numbers"!=i||r.is_number_keypress(o))&&("numbers-and-plus"!=i||r.is_number_keypress(o,"."))?"numbers-and-dash"!=i||r.is_number_keypress(o,"-")||o.preventDefault():o.preventDefault())}),o.$popup.find(".mpp-input").on("keyup",function(o){var n=e(this),i=n.data("valid-characters");if(n.closest(t).length&&"all"!=i)switch(i){case"not-numbers":this.value=this.value.replace(/[\d]+/,"");break;case"only-numbers":this.value=this.value.replace(/[^\d]+/,"");break;case"numbers-and-plus":this.value=this.value.replace(/[^\d.]+/,"");break;case"numbers-and-dash":this.value=this.value.replace(/[^\d-]+/,"")}})},get_last_open_event:function(e){return e||r.last_open_event},show_popup_content:function(){this.$popup.find(".mpp-content").css("opacity","1")},hide_popup_content:function(){this.$popup.find(".mpp-content").css("opacity","0")},show_popup:function(){var e=this;setTimeout(function(){e.$popup.fadeIn(120)},80)},hide_popup:function(){this.$popup.hide()},open:function(e){var o=this;if(e=e||o.options.open.event,r.last_open_event=e,!o.is_open&&!o.is_opening){if(o.call_function("beforeOpen",o.options.callbacks.beforeOpen),o.options.sticky.enabled&&o.options.sticky.initial&&"click"!=e)return void o.open_sticky_control();if(!o.enqueue_this_popup(e)||"on"!=r.enable_enqueue_popups)return setTimeout(function(){o.before_open_popup(e),o.showPopup&&setTimeout(function(){o.hide_preloader(),o.show_popup(),o.get_conversion()&&r.show_popup_on_conversion(o.options)?(o.show_conversion_content(),o.after_open_popup(e)):(o.animate_elements(),o.$wrap.animateCSS_MasterPopup(o.options.open.animation,{infinite:!0,infiniteClass:"",duration:r.parse_number(o.options.open.duration)}),setTimeout(function(){o.after_open_popup(e)},r.parse_number(o.options.open.duration)+100))},o.duration_preloader_and_overlay(e))},r.parse_number(o.options.open.delay)),!1}},enqueue_this_popup:function(e){var o=this;if(("onLoad"==e||"onScroll"==e)&&o.exist_open_popups()){var t=r.queue_popups.indexOf(o.options.id);return t>=0&&r.queue_popups.splice(t,1),r.queue_popups.push(o.options.id),!0}return!1},exist_open_popups:function(){return!this.is_inline()&&e(".mpp-popup").not(".mpp-inline").is(".mpp-is-opening, .mpp-is-open")},set_opening:function(e){var o=this;o.is_opening=e,e?o.$popup.addClass("mpp-is-opening"):o.$popup.removeClass("mpp-is-opening")},start_before_open_popup:function(e){this.$popup.css("opacity",0),this.$popup.show()},end_before_open_popup:function(e){this.$popup.css("opacity",1),this.$popup.hide()},before_open_popup:function(e){var o=this;o.showPopup&&(o.set_opening(!0),o.start_before_open_popup(),o.set_initial_styles(),o.set_dynamic_styles("onOpen"),o.open_overlay(e),o.lazy_load_content(),o.play_sound_effect(),o.end_before_open_popup())},after_open_popup:function(e){var o=this;o.set_opening(!1),o.is_open=!0,o.$wrap.removeClass(o.options.open.animation+" mpp-animated"),o.$popup.addClass("mpp-is-open"),o.play_autoplay_videos(),o.show_hide_link_powered_by("show"),o.close_automatically_delay(e),o.update_impressions(),-1==r.opened_popups.indexOf(o.popup_id)&&r.opened_popups.push(o.popup_id),r.set_custom_cookies_on_event(o.popup_id,"afterOpen",null),o.call_function("afterOpen",o.options.callbacks.afterOpen)},open_overlay:function(e){var o=this;o.has_overlay()&&(o.$overlay.fadeIn(o.overlay_duration_in(e)),o.options.preloader.show&&o.$overlay.find(".mpp-preloader").fadeIn(200))},overlay_duration_in:function(e){var o=this,t=o.get_last_open_event(e),n=r.parse_number(o.options.overlay.durationIn);return"onExit"==t&&(n=50),n},hide_preloader:function(){var e=this;e.has_overlay()&&e.$overlay.find(".mpp-preloader").fadeOut(250)},show_hide_link_powered_by:function(e){var o=this;o.$popup.find(".mpp-wrap-link-powered-by").length&&("show"==e?o.$popup.find(".mpp-wrap-link-powered-by").fadeIn(500):o.$popup.find(".mpp-wrap-link-powered-by").fadeOut(100))},duration_preloader_and_overlay:function(e){var o=this;if(!o.has_overlay())return 0;var t=0;return o.options.preloader.show&&(t=r.parse_number(o.options.preloader.duration)),t+o.overlay_duration_in(e)},lazy_load_content:function(e){this.load_iframe_url()},load_iframe_url:function(o){this.$popup.find(".mpp-element-iframe").each(function(o,t){var n=e(t).find(".mpp-iframe-wrap").data("src");n&&e(t).find(".mpp-iframe-wrap > iframe").attr("src",n)})},play_autoplay_videos:function(){this.get_device_content().find(".mpp-element-video").each(function(o,t){"on"==e(t).find(".mpp-wrap-video").data("autoplay")&&e(t).find(".mpp-video-poster .mpp-play-icon").trigger("click")})},play_sound_effect:function(){var e=this;if(!e.is_inline()&&e.options.sound.enabled&&e.options.sound.src){var o=e.$container.find(".mpp-sound-effect"),t=MPP_PUBLIC_JS.plugin_url+"assets/audio/"+e.options.sound.src;o.length||(e.$container.append('<audio class="mpp-sound-effect" preload="auto" muted="muted" style="display:none !important;"><source src="'+t+'" type="audio/mpeg"></source></audio>'),o=e.$container.find(".mpp-sound-effect")),setTimeout(function(){o[0].volume=.5,o[0].muted=!1,o[0].play()},e.duration_preloader_and_overlay()+r.parse_number(e.options.sound.delay)+200)}},animations_to_not_hide:function(){return["mpp-flash","mpp-pulse","mpp-rubberBand","mpp-shake","mpp-swing","mpp-tada","mpp-wobble"]},animate_elements:function(){var o=this;o.$elements.each(function(t,n){var i=e(n).data("animation");"on"==i.enable&&(o.animations_to_not_hide().indexOf(i.effect)<0&&e(n).hide(),setTimeout(function(){e(n).show()},r.parse_number(i.delay)+50),e(n).animateCSS_MasterPopup(i.effect,{delay:r.parse_number(i.delay),duration:r.parse_number(i.duration)}))})},set_initial_styles:function(){var e=this;e.update_z_index(),e.update_page_scroll("add"),e.options.sticky.enabled&&e.$sticky.fadeOut(150),e.options.wpEditor.enabled&&(e.$popup.addClass("mpp-has-wp-editor"),e.$wrap_content.css({padding:e.options.wpEditor.padding}))},set_dynamic_styles:function(e){var o=this;o.display_content_for_device(),o.resize_popup(e),o.resize_elements(e),o.reposition_close_icon_wp_editor(),o.notification_bar_styles()},notification_bar_styles:function(){var e=this;e.is_notification_bar()&&(e.options.notificationBar.fixed||(e.$popup.css("position","absolute"),"bottom-bar"==this.options.position&&e.fix_top_position_for_bottom_bar()),setTimeout(function(){e.is_opening?r.on("afterOpen",function(){e.is_closing||e.push_page_down_for_top_bar()}):e.is_closing||e.push_page_down_for_top_bar()},100))},update_z_index:function(){var e=this;e.is_inline()||(e.$overlay.css("z-index",r.z_index.overlay),r.z_index.overlay++,e.$popup.css("z-index",r.z_index.popup),r.z_index.popup++,e.$sticky.css("z-index",r.z_index.sticky),r.z_index.sticky++)},display_content_for_device:function(){var e=this;"mobile"==e.get_active_device()?"none"==e.$mobile_content.css("display")&&(e.$mobile_content.show(),e.$desktop_content.hide(),e.$popup.trigger("mpp_changed_device",[e,"mobile","desktop"])):"none"==e.$desktop_content.css("display")&&(e.$desktop_content.show(),e.$mobile_content.hide(),e.$popup.trigger("mpp_changed_device",[e,"desktop","mobile"]))},get_ratio:function(){var e=this,o=e.get_device_options(),t=e.window_size(),n=Math.max(280,t.width-e.get_spacing()-e.get_side_spacing()),i=Math.max(280,t.height-e.get_spacing()),p=Math.min(n/e.get_number_value(o.width+o.widthUnit,"horizontal"),i/e.get_number_value(o.height+o.heightUnit,"vertical"));return(e.is_notification_bar()||e.options.fullScreen)&&(p=t.width/o.browserWidth),e.is_notification_bar()&&e.options.fullScreen||(p=p>1?1:p),p},resize_popup:function(e){var o=this,t=o.get_device_options(),n=o.get_ratio();o.options.fullScreen&&!o.is_notification_bar()?o.$popup.css({width:"100%",height:"100%"}):(o.in_mobile_reference()&&(n*=parseFloat(o.options.ratioSmallDevices)),o.is_notification_bar()?o.$popup.css("width","100%"):o.$popup.css("width",o.value_by_ratio(n,t.width+t.widthUnit)),o.options.wpEditor.enabled?o.options.wpEditor.autoHeight?o.$popup.css("height","auto"):o.$popup.css("height",t.height+t.heightUnit):o.$popup.css("height",o.value_by_ratio(n,t.height+t.heightUnit))),o.is_notification_bar()?o.$device_contents.css({width:o.value_by_ratio(n,t.browserWidth+"px"),height:o.value_by_ratio(n,t.height+"px")}):o.options.fullScreen?o.$device_contents.css({width:o.value_by_ratio(n,t.browserWidth+"px"),height:o.value_by_ratio(n,t.browserHeight+"px")}):o.$device_contents.css({width:o.value_by_ratio(n,t.width+"px"),height:o.value_by_ratio(n,t.height+"px")}),o.options.wpEditor.enabled&&(o.fix_content_overflow_wp_editor(),o.resize_wp_editor())},resize_elements:function(o){var t=this,n=t.get_ratio(),i=t.window_size(),p=t.get_device_content(),s=t.get_sizes(p);t.$elements.each(function(o,p){var a=e(p).data("type"),c=e(p).data("position"),u=e(p).data("size"),l=c.top,d=c.left;if(e(p).css({top:t.value_by_ratio(n,l),left:t.value_by_ratio(n,d),width:t.value_by_ratio(n,u.width),height:t.value_by_ratio(n,u.height)}),"shortcode"!=a){var _=e(p).find(".mpp-element-content"),f=_.data("font"),m=_.data("padding"),h=_.data("border"),v=_;e.inArray(a,t.form_elements())>-1&&(v=_.find("input"),"field_message"==a?v=_.find("textarea"):"custom_field_dropdown"==a&&(v=_.find("select")));var g={"font-size":t.value_by_ratio(n,f["font-size"]),"padding-top":t.value_by_ratio(n,m.top),"padding-right":t.value_by_ratio(n,m.right),"padding-bottom":t.value_by_ratio(n,m.bottom),"padding-left":t.value_by_ratio(n,m.left),"border-top-width":t.value_by_ratio(n,h["top-width"]),"border-right-width":t.value_by_ratio(n,h["right-width"]),"border-bottom-width":t.value_by_ratio(n,h["bottom-width"]),"border-left-width":t.value_by_ratio(n,h["left-width"]),"border-radius":t.value_by_ratio(n,h.radius)};if(e.each(g,function(e,o){v._css(e,o,"important")}),"custom_field_dropdown"==a){var b=r.number_data(f["font-size"]),y=.8*r.parse_number(b.value)+b.unit;e(p).find(".mpp-icon-dropdown").css({"font-size":t.value_by_ratio(n,y)})}if("video"!=a&&"iframe"!=a||"on"==u["full-screen"]&&(e(p)._css("width",i.width+"px","important"),e(p)._css("height",i.height+"px","important"),e(p)._css("top",i.scrollTop-s.offset.top+"px","important"),e(p)._css("left",i.scrollLeft-s.offset.left+"px","important")),"on"==u["full-width"]&&(e(p)._css("width",i.width+"px","important"),e(p)._css("left",i.scrollLeft-s.offset.left+"px","important")),"countdown"==a){var w=e(p).data("countdown-timer");v=e(p).find(".mpp-countdown"),v._css("font-size",t.value_by_ratio(n,w["label-font-size"])),v.find(".mpp-count")._css("font-size",t.value_by_ratio(n,f["font-size"])),v.find(".mpp-count-digit")._css("width",t.value_by_ratio(n,w.width)),v.find(".mpp-count-digit")._css("height",t.value_by_ratio(n,w.height)),v.find(".mpp-count-digit .mpp-count.mpp-top")._css("line-height",t.value_by_ratio(n,w.height))}}}),t.$elements.filter(".mpp-on-top-right-page").length&&t.force_top_right_page_close_icon(n)},fix_content_overflow_wp_editor:function(){var e=this;if(e.options.wpEditor.enabled&&e.options.wpEditor.autoHeight){var o=e.window_size(),t=e.$wrap.find(".mpp-content-wp-editor");t.css({overflow:"visible",height:"auto"}),t.height()<o.height?e.$wrap_content.css("height","auto"):e.$wrap_content.css("height","100%"),t.css({overflow:"auto",height:"100%"})}},resize_wp_editor:function(){var e=this;if(!e.is_inline()){var o=e.window_size(),t=e.popup_size(),n=30;"middle-center"==e.options.position&&(n=40),"middle-center"==e.options.position&&"middle-center"!=e.options.position||t.height+1>o.height&&(e.$popup.css("height",o.height-n),t=e.popup_size());var i=Math.max(0,(o.height-t.height)/2),p=Math.max(0,(o.width-t.width)/2);switch(e.options.position){case"top-left":case"top-center":case"top-right":case"top-bar":"top-center"==e.options.position&&e.$popup.css("left",p+o.scrollLeft);break;case"middle-center":e.$popup.css({top:i,left:p+o.scrollLeft});break;case"middle-left":case"middle-right":e.$popup.css("top",i);break;case"bottom-left":case"bottom-center":case"bottom-right":case"bottom-bar":"bottom-center"==e.options.position&&e.$popup.css("left",p+o.scrollLeft)}}},reposition_close_icon_wp_editor:function(){var e=this,o=e.$popup.find(".mpp-close-icon");if(o.length){var t=e.popup_size();o.css({left:t.width-o.width()-10,top:10})}},force_top_right_page_close_icon:function(e){var o=this,t=o.window_size(),n=o.popup_size(),i=parseInt(30*e),p=o.$elements.filter(".mpp-on-top-right-page"),s=p.width(),a=-n.position.top+i,r=t.width-o.$popup.offset().left-i-s;if(o.$elements.filter(".mpp-on-top-right-page").css({top:a,left:r}),o.options.fullScreen||o.is_notification_bar()){var c=o.get_device_content(),u=-(t.width-c.width())/2+i;a=n.height>=80?i:parseInt(18*e),o.$elements.filter(".mpp-on-top-right-page").css({top:a,left:"auto",right:u}),o.options.fullScreen&&(a=-(t.height-c.height())/2+i,o.$elements.filter(".mpp-on-top-right-page").css("top",a))}},fix_top_position_for_bottom_bar:function(){var t=this,n=t.window_size();t.$popup.css("top",n.documentHeight),t.$popup.css("bottom","auto");var i=!1;e(o).scroll(function(){!i&&r.in_scroll_top("5%")&&(i=!0,t.$popup.hide(),n=t.window_size(),t.$popup.fadeIn(400),t.$popup.css("top",n.documentHeight))})},push_page_down_for_top_bar:function(){var o=this;if(o.is_open&&o.options.notificationBar.pushPageDown&&"bottom-bar"!=o.options.position){var t=e(o.options.notificationBar.fixedHeaderSelector),n=e(o.options.notificationBar.containerPageSelector);n=n.length?n:o.$body;var i=o.$popup.outerHeight();e("#wpadminbar").length&&o.$popup.css("margin-top",e("#wpadminbar").outerHeight());var p=0,s=0;t.length&&(void 0===t.data("margin-top")&&t.attr("data-margin-top",t.css("margin-top")),p="fixed"==t.css("position")&&o.options.notificationBar.fixed?i:t.data("margin-top"),t.css({"margin-top":p})),n.length&&(void 0===n.data("margin-top")&&n.attr("data-margin-top",n.css("margin-top")),s=i,t.length&&o.options.notificationBar.fixed&&("fixed"==t.css("position")?s+=t.outerHeight():s+=parseInt(n.data("margin-top"))),n.css({"margin-top":s}))}},restore_page_down_for_top_bar:function(){var o=this;if(o.options.notificationBar.pushPageDown&&"bottom-bar"!=o.options.position){var t=e(o.options.notificationBar.fixedHeaderSelector),n=e(o.options.notificationBar.containerPageSelector);n=n.length?n:o.$body;var i="0px",p="0px";t.length&&(i=void 0!==t.data("margin-top")?t.data("margin-top"):0,t.stop().animate({"margin-top":i},750,function(){})),n.length&&(p=void 0!==n.data("margin-top")?n.data("margin-top"):0,n.stop().animate({"margin-top":p},750,function(){}))}},close_automatically_delay:function(e){var o=this;r.opened_popups.indexOf(o.popup_id)>-1||o.options.triggers.close.automatically.enabled&&setInterval(function(){r.working!=o.popup_id&&o.is_open&&o.close(e)},r.parse_number(o.options.triggers.close.automatically.delay))},close:function(e,o){var t=this;t.is_inline()&&!t.options.inline.shouldClose||(o=void 0===o||o,t.is_open&&(t.is_closing=!0,t.before_close_popup(o),t.$wrap.animateCSS_MasterPopup(t.options.close.animation,{infinite:!0,infiniteClass:"",duration:t.options.close.duration}),setTimeout(function(){t.after_close_popup(o)},r.parse_number(t.options.close.duration))))},before_close_popup:function(e){var o=this;o.is_notification_bar()&&o.restore_page_down_for_top_bar(),o.show_hide_link_powered_by("hide"),o.update_page_scroll("remove"),o.call_function("beforeClose",o.options.callbacks.beforeClose)},after_close_popup:function(e){var o=this;o.close_overlay(),o.hide_popup(),o.$wrap.removeClass(o.options.close.animation+" mpp-animated"),o.$popup.removeClass("mpp-is-open"),o.is_closing=!1,o.is_open=!1,o.restore_video_poster_and_stop_videos(),o.restore_iframe_url(),o.remove_processing_form(),o.set_cookies_after_close(),"on"==r.enable_enqueue_popups&&o.open_enqueue_popups(),o.call_function("afterClose",o.options.callbacks.afterClose),o.options.sticky.enabled&&e&&o.open_sticky_control()},close_overlay:function(){var e=this;e.has_overlay()&&e.$overlay.fadeOut(r.parse_number(e.options.overlay.durationOut))},restore_iframe_url:function(o){this.$popup.find(".mpp-element-iframe").each(function(o,t){e(t).find(".mpp-iframe-wrap > iframe").attr("src","about:blank")})},restore_video_poster_and_stop_videos:function(o){var t=this,n=t.$popup.find(".mpp-element-video");o&&(n=t.get_device_content(o).find(".mpp-element-video")),n.each(function(o,t){e(t).find(".mpp-video-poster").css("display","block");var n,i=e(t).find(".mpp-wrap-video");if("html5"==i.data("video-type")){n=i.find("video").first();var p=videojs(n.attr("id"));p.pause(),p.currentTime(0)}else n=i.find("iframe").first(),n.attr("src","about:blank")})},update_page_scroll:function(o){var t=this;!t.is_inline()&&t.options.open.disablePageScroll&&e("html").toggleClass("mpp-disable-page-scroll","add"==o)},open_sticky_control:function(){var e=this;if(e.options.sticky.enabled&&!r.has_cookie_not_show_popup(e.popup_id)){var o="mpp-slideInUp";switch(e.options.position){case"top-left":case"top-center":case"top-right":case"top-bar":o="mpp-slideInDown";break;case"middle-left":o="mpp-slideInLeft",e.options.sticky.vertical&&(o="mpp-slideInDown");break;case"middle-right":o="mpp-slideInRight",e.options.sticky.vertical&&(o="mpp-slideInUp");break;case"bottom-left":case"bottom-center":case"bottom-right":case"bottom-bar":o="mpp-slideInUp"}e.$sticky.fadeIn(300).find(".mpp-sticky-control").animateCSS_MasterPopup(o,{infinite:!1,infiniteClass:"",duration:1e3}),e.$sticky.fadeIn(300).css({"z-index":r.z_index.sticky})}},set_cookies_after_close:function(){var e=this,o=e.options.cookies[e.get_last_open_event()];o&&o.enabled&&r.cookie.set(o.name,!0,"days"==o.duration?o.days:0),r.set_custom_cookies_on_event(e.popup_id,"afterClose",null)},get_conversion:function(){var e=this;return!!r.get_cookie_event("onConversion",e.options)},open_enqueue_popups:function(){r.queue_popups.length>0&&(r.open_popup_by_id(r.queue_popups[0]),r.queue_popups.shift())},update_impressions:function(e){var o=this;if(e=e||!1,!MPP_PUBLIC_JS.is_admin){var t={};t.action="mpp_update_impressions",t.popup_id=o.options.id,t.restore=e,setTimeout(function(){o.ajax({data:t,success:function(e){}},"update_impressions")},7e3)}},update_submits:function(){var e=this,o={};o.action="mpp_update_submits",o.popup_id=e.options.id,e.ajax({data:o,success:function(e){}},"update_submits")},build_conversion_content:function(){var e=this,o='<div class="mpp-conversion"><div class="mpp-conversion-content">'+e.options.afterConversion.message+'</div><div class="mpp-conversion-footer"><span class="mpp-close-popup">'+MPP_PUBLIC_JS.strings.close_popup+"</span></div></div>";return e.$wrap.find(".mpp-conversion").length||e.$wrap.append(o),e.$wrap.find(".mpp-conversion")},show_conversion_content:function(){var e=this,o=e.build_conversion_content();e.hide_popup_content(),e.is_inline()&&!e.options.inline.shouldClose&&o.find(".mpp-close-popup").remove(),o.fadeIn(400)},build_processing_form:function(){var e=this,o='<div class="mpp-processing-form"><div class="mpp-processing-form-content"></div><div class="mpp-processing-form-footer"><span class="mpp-back-to-form">'+MPP_PUBLIC_JS.strings.back_to_form+'</span><span class="mpp-close-popup">'+MPP_PUBLIC_JS.strings.close_popup+"</span></div></div>";e.$wrap.append(o);var t=e.$wrap.find(".mpp-processing-form");return e.build_preloader(t),e.is_inline()&&!e.options.inline.shouldClose&&t.find(".mpp-close-popup").remove(),e.$wrap.find(".mpp-preloader").fadeIn(200),t},remove_processing_form:function(){var o=this;o.show_popup_content(),o.$wrap.find(".mpp-processing-form").fadeOut(300,function(o){e(this).remove()
})},remove_preloader_processing_form:function(){var e=this,o=e.$wrap.find(".mpp-processing-form");o.find(".mpp-preloader").remove(),o.find(".mpp-processing-form-footer").fadeIn(200)},process_form:function(o,t,n){var i=this,p=t.find(".mpp-form-element:not(.mpp-element-field_submit)"),s=n.find(".mpp-processing-form-content"),a=p.find("input[name],select[name],textarea[name]").serializeMyObject();a.action="mpp_"+i.$popup.data("form-type"),a.popup_id=i.options.id,a.current_device=p.eq(0).data("device"),a.popup_elements=[],p.each(function(o,t){a.popup_elements.push(e(t).data("index"))}),i.ajax({data:a,beforeSend:function(){},success:function(e){if(e)if(e.error)s.html(e.message);else if(e.success){var t=i.options.cookies.onConversion;t.enabled&&r.cookie.set(t.name,!0,"days"==t.duration?t.days:0),r.set_custom_cookies_on_event(i.popup_id,"onConversion",null),e.actions.close_popup&&setTimeout(function(){i.close(o,!1),r.open_popup_by_id(e.actions.open_popup_id)},r.parse_number(e.actions.close_popup_delay)),e.actions.download_file&&setTimeout(function(){r.downloadURI(e.actions.file,"")},1e3),e.actions.redirect&&setTimeout(function(){i.$body.hasClass("wp-admin")?alert("MasterPopups say: Redirection is disabled in Admin"):r.redirect(e.actions.redirect_to,e.actions.redirect_target)},1500),e.actions.advanced_redirection&&setTimeout(function(){i.$body.hasClass("wp-admin")?alert("MasterPopups say: Redirection is disabled in Admin"):r.redirect(e.actions.advanced_redirection,e.actions.redirect_target)},1500),i.update_submits(),i.$popup.addClass("mpp-form-sent-ok"),s.html(e.actions.message),i.call_function("submit",i.options.callbacks.onSubmit,!0)}else{var n=e.actions.message;e.actions.error&&(n+='<div style="padding-top: 8px;"><strong>ERROR: </strong><em>'+e.actions.error+"</em></div>"),s.html(n),i.call_function("submit",i.options.callbacks.onSubmit,!1)}},complete:function(e,o){i.remove_preloader_processing_form()}},"process_form")},validate_form:function(o,t){var n,i,p,s,a=this,r=!0,c=!0,u=1;return t.find(".mpp-form-element").each(function(o,t){if("off"==e(t).data("required"))return!0;if(p=e(t).data("type"),n="custom_field_input_checkbox"==p||"custom_field_input_checkbox_gdpr"==p?e(t).find("input.mpp-checkbox"):"custom_field_dropdown"==p?e(t).find("select.mpp-select"):"field_message"==p?e(t).find("textarea.mpp-textarea"):e(t).find("input.mpp-input"),e(t).removeClass("mpp-has-error").find(".mpp-error-warning").remove(),n.removeClass("mpp-error"),"custom_field_input_checkbox"==p||"custom_field_input_checkbox_gdpr"==p)n.is(":checked")?r=!0:(r=!1,c=!1,s=MPP_PUBLIC_JS.strings.validation.checkbox);else if("field_email"==p)i=n.val(),a.validator.is_email(i)?r=!0:(r=!1,c=!1,s=MPP_PUBLIC_JS.strings.validation.email);else if("custom_field_dropdown"==p)a.validator.min_length(n.val(),1)?r=!0:(r=!1,c=!1,s=MPP_PUBLIC_JS.strings.validation.dropdown);else{var l=e(t).find(".mpp-input");if(l.length&&l.data("min-characters")&&(u=parseInt(l.data("min-characters"))),u=u>=1?u:1,a.validator.min_length(n.val(),u))r=!0;else{r=!1,c=!1;var d=MPP_PUBLIC_JS.strings.validation.min_length;s=MPP_PUBLIC_JS.strings.validation.general+" ("+d+" "+u+")"}}r||(n.addClass("mpp-error"),e(t).addClass("mpp-has-error").append('<span class="mpp-error-warning" title="'+s+'"></span>'))}),c},call_function:function(o,t,n){var i=this;e.isFunction(t)&&t.call(i,jQuery,i,i.options.id,i.options,n),r.call_events(o,jQuery,i,i.options.id,i.options,n)},viewport:function(){var e=o,n="inner";return"innerWidth"in o||(n="client",e=t.documentElement||t.body),{width:e[n+"Width"],height:e[n+"Height"]}},window_size:function(){var n=this,i={height:e(o).height(),documentWidth:e(t).width(),documentHeight:e(t).height(),scrollTop:e(o).scrollTop(),scrollLeft:e(o).scrollLeft(),viewport:{width:n.viewport().width,height:n.viewport().height}};return n.is_inline()?i.width=n.$container.parent().innerWidth():i.width=e(o).width(),i},popup_size:function(){var e=this;return e.get_sizes(e.$popup)},get_sizes:function(e){return e.length?{width:e.width(),height:e.height(),innerWidth:e.innerWidth(),innerHeight:e.innerHeight(),outerWidth:e.outerWidth(!0),outerHeight:e.outerHeight(!0),position:{top:e.position().top,left:e.position().left},offset:{left:e.offset().left,top:e.offset().top}}:{}},get_device_options:function(){var e=this;return"mobile"==e.get_active_device()?e.options.mobile:e.options.desktop},get_active_device:function(){var e=this;return e.is_inline()?"desktop":e.options.mobileDesign&&e.in_mobile_reference()?"mobile":"desktop"},get_device_content:function(e){var o=this;return e=e||o.get_active_device(),"desktop"==e?o.$desktop_content:o.$mobile_content},in_mobile_reference:function(){return this.window_size().width<=r.parse_number(this.options.mobile.browserWidth)},is_notification_bar:function(){return"top-bar"==this.options.position||"bottom-bar"==this.options.position},is_inline:function(){return this.$popup.hasClass("mpp-inline")},get_spacing:function(){var e=this,o=e.get_device_options();return e.is_inline()||100==o.width&&"%"==o.widthUnit?0:e.window_size().width<=e.options.mobile.browserWidth?10:20},get_side_spacing:function(){var e=this;return e.is_inline()?0:e.options.position.indexOf("left")>-1||e.options.position.indexOf("right")>-1?.12*e.window_size().width:0},is_support_css_property:function(e){var o=t.createElement("div");if(e=e.toLowerCase(),void 0!==o.style[e])return!0;for(var n=e.charAt(0).toUpperCase()+e.substr(1),i="Webkit Moz ms O".split(" "),p=0;p<i.length;p++)if(void 0!==o.style[i[p]+n])return!0;return!1},form_elements:function(){return["field_first_name","field_last_name","field_email","field_phone","field_message","custom_field_input_text","custom_field_dropdown"]},has_overlay:function(){var e=this;return e.options.overlay.show&&1==e.$overlay.length},get_number_value:function(e,o){var t=this,n=t.window_size(),i=1;if(o=o||"horizontal",t.is_numeric(e)){var p=r.number_data(e);i=p.value,"%"==p.unit&&("horizontal"==o?i=p.value/100*n.width:"vertical"==o&&(i=p.value/100*n.height))}return r.parse_number(i)},value_by_ratio:function(e,o){var t=this;if(t.is_auto(o))return o;if(t.is_numeric(o)){var n=r.number_data(o);return e*parseFloat(n.value)+n.unit}return""},is_number:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},is_numeric:function(e){return!isNaN(parseInt(e))},is_auto:function(o){return e.inArray(o,["auto","initial","inherit","normal"])>-1},number_full_width:function(){return this.get_number_value("100%","horizontal")},number_full_height:function(){return this.get_number_value("100%","vertical")},validator:{is_email:function(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},min_length:function(o,t){return e.trim(o).length>=t}},css:{number:function(o,t){var n=this;t=t||"";var i=["auto","initial","inherit","normal"];return e.inArray(o,i)>-1?o:(o=o.toString().replace(/[^0-9.\-]/g,""),n.is_number(o)?o+t:1)},is_number:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},ajax:function(o,t){var n=this,i={type:"post",data:{ajax_nonce:MPP_PUBLIC_JS.ajax_nonce},dataType:"json",beforeSend:function(){},success:function(e){},complete:function(e,o){}};o=e.extend(!0,{},i,o),s("==================== AJAX PROCESS ===================="),s("Popup ID: "+n.popup_id+", options.data:"),s(o.data),e.ajax({url:MPP_PUBLIC_JS.ajax_url,type:o.type,dataType:o.dataType,data:o.data,beforeSend:o.beforeSend,success:function(i){s("====== AJAX Event: "+t+" ========"),s("Popup ID: "+n.popup_id+", ajax success, response:"),s(i),e.isFunction(o.success)&&o.success.call(this,i)},error:function(e,o,t){s("ajax error, jqXHR"),s(e),s("ajax error, errorThrown"),s(t)},complete:function(t,n){e.isFunction(o.complete)&&o.complete.call(this,t,n)}})},queryStringToJson:function(e){if(""===e)return"";e=e||location.search,0===e.indexOf("?")&&(e=e.slice(1));var o=e.split("&"),t={};for(var n in o){var i=o[n].split("=");i[0]&&(t[i[0]]=decodeURIComponent(i[1]||""))}return t}},r.set_custom_cookie=function(e){r.cookie.set(e.name,!0,"days"==e.duration?e.days:0)},r.set_custom_cookies_on_event=function(o,t,n){var i=r.get_custom_cookies(o);e.each(i,function(e,o){"on"==o.enable&&(n&&n===o.name&&o.event===t||!n&&o.event===t)&&(r.cookie.get(o.name)||r.set_custom_cookie(o))})},r.get_custom_cookies=function(e){return MPP_POPUP_OPTIONS[e]?MPP_POPUP_OPTIONS[e].custom_cookies:{}},r.has_cookie_not_show_popup=function(o){var t=!1,n=r.get_custom_cookies(o);return e.each(n,function(e,o){null!==r.cookie.get(o.name)&&o.behavior&&o.behavior.indexOf("not_show_popup")>-1&&(t=!0)}),t},r.get_cookie_event=function(e,o){if(o.cookies&&o.cookies[e]){var t=o.cookies[e];if(t.enabled&&null!==r.cookie.get(t.name))return r.cookie.get(t.name)}return null},r.create_cookie_loads_counter=function(e){var o=!!MPP_POPUP_OPTIONS[e]&&MPP_POPUP_OPTIONS[e];if(o&&o.open.loadCounter>0&&!MPP_PUBLIC_JS.is_admin){var t=r.cookie.get(o.cookies.loadCounter.name);t=null===t?0:Number(t);var n=t;return t++,r.cookie.set(o.cookies.loadCounter.name,t,0),{loadCounter:o.open.loadCounter,pageViews:n}}return{loadCounter:0,pageViews:0}},r.show_popup_on_conversion=function(e){var o=!0;return r.get_cookie_event("onConversion",e)&&(o=!1,e.afterConversion.message.length&&(o=!0)),o},r.is_empty=function(o){return void 0===o||null===o||("object"==typeof o&&o instanceof e?0===o.length:!1===o||0===e.trim(o).length)},r.parse_number=function(e){return e=parseFloat(e),isFinite(e)?e:1},r.in_scroll_top=function(n,i){i=i||">=";var p=r.number_data(n),s=r.parse_number(p.value);return">="===i?"%"==p.unit?e(o).scrollTop()>=(e(t).height()-e(o).height())*(s/100):e(o).scrollTop()>=s:"%"==p.unit?e(o).scrollTop()<=(e(t).height()-e(o).height())*(s/100):e(o).scrollTop()<=s},r.in_scroll_element=function(t,n){n=n||"top";var i=t.offset().top,p=t.outerHeight(),s=e(o).scrollTop(),a=e(o).height();if("top"==n){return s>i-.5*a}if("bottom"==n){var r=e("body").height()-a,c=i+p-.6*a;return c>r&&(c=c-.4*a-100),s>c}return!1},r.number_data=function(o){var t={value:o,unit:void 0};return o?(o=o.toString(),e.inArray(o,["auto","initial","inherit","normal"])>-1?(t.value=o,t.unit=void 0):o.indexOf("px")>-1?(t.value=o.replace("px",""),t.unit="px"):o.indexOf("%")>-1?(t.value=o.replace("%",""),t.unit="%"):o.indexOf("em")>-1&&(t.value=o.replace("em",""),t.unit="em"),t):t},r.cookie={set:function(e,o,n){var i="";if(n){n=parseFloat(n,10);var p=new Date;p.setTime(p.getTime()+24*n*60*60*1e3),i="; expires="+p.toGMTString()}t.cookie=e+"="+o+i+"; path=/"},get:function(e){for(var o=e+"=",n=t.cookie.split(";"),i=0;i<n.length;i++){for(var p=n[i];" "===p.charAt(0);)p=p.substring(1,p.length);if(0===p.indexOf(o))return p.substring(o.length,p.length)}return null},remove:function(e){this.set(e,"",-1)}},r.reverse_object=function(e){var o={},t=[];for(var n in e)t.push(n);for(var i=t.length-1;i>=0;i--){var p=e[t[i]];o[t[i]]=p}return o},r.is_control_keypress=function(o){return-1!==e.inArray(o.keyCode,[8,46,9,27,13])||65==o.keyCode&&(!0===o.ctrlKey||!0===o.metaKey)||67==o.keyCode&&(!0===o.ctrlKey||!0===o.metaKey)||86==o.keyCode&&(!0===o.ctrlKey||!0===o.metaKey)||88==o.keyCode&&(!0===o.ctrlKey||!0===o.metaKey)||o.keyCode>=35&&o.keyCode<=39},r.is_number_keypress=function(o,t){return!(!t||"."!=t||-1===e.inArray(o.keyCode,[110,190]))||(!(!t||"-"!=t||-1===e.inArray(o.keyCode,[189,109]))||(!(o.shiftKey||o.keyCode<48||o.keyCode>57)||!(o.keyCode<96||o.keyCode>105)))},r.isjQuery=function(e){return e&&(e instanceof jQuery||e.constructor.prototype.jquery)},r.get_instance=function(e){return r.get_popup_object(e).data("MasterPopup")},r.get_popup_object=function(o){return r.isjQuery(o)?o.hasClass("mpp-container")?o.find(">.mpp-box"):o.hasClass("mpp-box")?o:o.closest(".mpp-box"):e(".mpp-container-"+o+"> .mpp-box")},r.open_popup_by_id=function(o,t){var n;return t&&"object"==typeof t?n=e(".mpp-popup-"+o).MasterPopups(t):r.is_empty(MPP_POPUP_OPTIONS[o])||(n=e(".mpp-popup-"+o).MasterPopups(MPP_POPUP_OPTIONS[o])),n},r.open=function(e,o){return r.open_popup_by_id(e,o)},r.get_popup_elements=function(e){return r.get_popup_object(e).find(".mpp-element")},r.close=function(e){var o=r.get_instance(e);o&&o.close()},r.on=function(e,o){r.callbacks.push({name:e,callback:o})},r.call_events=function(e,o,t,n,i,p){r.callbacks&&r.callbacks.map(function(s){s.name===e&&"function"==typeof s.callback&&s.callback.call(this,o,t,n,i,p)})},r.isCmdKey=function(e){return!!e.ctrlKey||!!e.metaKey},r.isShiftKey=function(e){return!!e.shiftKey},r.isIE=function(){var e=o.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var i=e.indexOf("Edge/");return i>0&&parseInt(e.substring(i+5,e.indexOf(".",i)),10)},r.copy_to_clipboard=function(e){var o=t.createElement("textarea");t.body.appendChild(o),o.value=e,o.select(),t.execCommand("copy"),t.body.removeChild(o)},r.downloadURI=function(e,o){var n=t.createElement("a");n.href=e,n.download=o,n.target="_blank",n.style.display="none",t.body.appendChild(n),"undefined"!=typeof MouseEvent?n.dispatchEvent(new MouseEvent("click")):n.click(),t.body.removeChild(n)},r.redirect=function(e,t,n){n=n||1e3,e&&"http://"!=e&&"#"!=e&&("_blank"==t?setTimeout(function(){o.open(e,t)},n):setTimeout(function(){o.location=e},n))},e.fn.MasterPopups=function(o){if("string"!=typeof o)return this.each(function(){var t=e(this).data("popup-id");if(void 0===o&&t&&(o=MPP_POPUP_OPTIONS[t]),e(this).data("MasterPopup")){var n="click";return e(this).data("popup")&&(n=o.open.event||"click"),e(this).data("MasterPopup").open(n)}e(this).data("MasterPopup",new i(this,o))});console.log("Options is string")},e(function(){a()}),e(function(o){e(t).on("click",".mpp-box",function(o){var t=e(this).closest(".mpp-box").data("popup-id");if(r.isCmdKey(o)&&!r.isShiftKey(o))p("=== POPUP ID",t),r.copy_to_clipboard(t);else if(r.isCmdKey(o)&&r.isShiftKey(o)){p("=== POPUP ID",t);var n={};if(!MPP_POPUP_DISPLAY_OPTIONS)return void p("MPP_POPUP_DISPLAY_OPTIONS is undefined");if(!MPP_POPUP_DISPLAY_OPTIONS[t])return void p("MPP_POPUP_DISPLAY_OPTIONS[popup_id] is undefined");n.display_options=MPP_POPUP_DISPLAY_OPTIONS[t],p("Display options",n.display_options),n.display_options.should_display&&(n.popup_options=MPP_POPUP_OPTIONS[t],p("Popup options",n.popup_options)),r.copy_to_clipboard(JSON.stringify(n))}})}),r}(jQuery,window,document),function(e){if(!e.fn._css){var o=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};!!CSSStyleDeclaration.prototype.getPropertyValue||(CSSStyleDeclaration.prototype.getPropertyValue=function(e){return this.getAttribute(e)},CSSStyleDeclaration.prototype.setProperty=function(e,t,n){this.setAttribute(e,t);var n=void 0!==n?n:"";if(""!=n){var i=new RegExp(o(e)+"\\s*:\\s*"+o(t)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(i,e+": "+t+" !"+n+";")}},CSSStyleDeclaration.prototype.removeProperty=function(e){return this.removeAttribute(e)},CSSStyleDeclaration.prototype.getPropertyPriority=function(e){return new RegExp(o(e)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi").test(this.cssText)?"important":""}),e.fn._css=function(o,t,n){var i=this;if(void 0===i.get(0))return i;var p=function(e){var p=e.style;return void 0!==o?void 0!==t?(n=void 0!==n?n:"",p.setProperty(o,t,n),i):p.getPropertyValue(o):p},s=i;return e.each(this,function(e,o){s=p(o)}),s}}}(jQuery),function(e,o){"$:nomunge";e.fn.serializeMyObject=function(){var o={};return e.each(this.serializeArray(),function(t,n){var i=n.name,p=n.value;o[i]=void 0===o[i]?p:e.isArray(o[i])?o[i].concat(p):[o[i],p]}),o}}(jQuery),window.MasterPopupsCountdown=function(e,o,t,n){function i(o,t){var n=this;if(n.$el=e(o),n.timer=null,n.timerEnd=!1,t=t||{},n.defaults={popupId:0,id:0,fillZeros:!0,endClass:"expired",type:"date_time",expireInCookie:"TimerExpireIn",resetDateCookie:"TimerResetExpired",resetSessionCookie:"TimerResetSession",labels:["months","weeks","days","hours","minutes","seconds"],strings:{days:"days",hours:"hours",minutes:"minutes",months:"months",seconds:"seconds",weeks:"weeks",years:"years"},date:(new Date).setMonth((new Date).getMonth()+1),expireDays:7,expireHours:0,dateObj:{year:"0000",month:"00",day:"00",hour:"00",minute:"00",second:"00"},currDate:{},nextDate:{},newDate:{},resetTimer:!1,resetType:"session",resetDays:5,resetHours:0,resetAfterDays:10},n.metadata=n.$el.data("options")||{},"string"==typeof n.metadata)try{n.metadata=JSON.parse(n.metadata)}catch(e){n.metadata={}}return"object"!=typeof n.metadata.strings&&(n.metadata.strings=this.parseStrings(n.metadata.strings)),n.options=e.extend(!1,{},n.defaults,n.metadata,t),n.options.strings=e.extend(!0,{},n.defaults.strings,n.metadata.strings,t.strings),n.options.expireInCookie="mpp_timer_"+n.options.popupId,n.options.flagCookie=n.options.expireInCookie+"_flag",n.options.resetDateCookie=n.options.expireInCookie+"_reset_date",n.options.resetSessionCookie=n.options.expireInCookie+"_reset_session",n.options.labels.length>0&&(this.init(),this.build(),this.runTimer(n.options.date)),this}var p={callbacks:[],dateParser:/(\s|:|\-|\/|T)/gi,units:{}};return e(function(){p.units={seconds:MppCountdown.SECONDS,minutes:MppCountdown.MINUTES,hours:MppCountdown.HOURS,days:MppCountdown.DAYS,weeks:MppCountdown.WEEKS,months:MppCountdown.MONTHS,years:MppCountdown.YEARS}}),i.prototype={init:function(){var e=this;e.options.currDate=e.initialDate(e.options.labels),e.options.nextDate=e.initialDate(e.options.labels),e.options.newDate=e.initialDate(e.options.labels),this.sortLabels()},sortLabels:function(){this.options.labels.sort(function(e,o){return p.units[o]-p.units[e]})},parseStrings:function(e){var o={};return e=e.split(","),e.length&&e.map(function(e,t,n){if(e=e.replace(/\s/g,"").split("="),e[0]&&e[1])switch(e[0]){case"Days":case"days":o.days=e[1];break;case"Hours":case"hours":o.hours=e[1];break;case"Minutes":case"minutes":o.minutes=e[1];break;case"Seconds":case"seconds":o.seconds=e[1];break;case"Weeks":case"weeks":o.weeks=e[1];break;case"Months":case"months":o.months=e[1];break;case"Years":case"years":o.years=e[1]}}),o},build:function(){var e=this;e.$el.html(""),e.options.labels.forEach(function(o,t){var n=e.options.currDate[o],i=e.options.currDate[o];e.$el.append('<div class="mpp-time mpp-time-'+o+'">'),e.$el.find(".mpp-time").last().append('<div class="mpp-count-digit">');var p=e.options.strings[o]?e.options.strings[o]:o;e.$el.find(".mpp-time").last().append('<span class="mpp-count-label">'+p+"</span>"),e.$el.find(".mpp-time").last().find(".mpp-count-digit").append('<span class="mpp-count mpp-curr mpp-top">'+n+"</span>"),e.$el.find(".mpp-time").last().find(".mpp-count-digit").append('<span class="mpp-count mpp-next mpp-top">'+i+"</span>"),e.$el.find(".mpp-time").last().find(".mpp-count-digit").append('<span class="mpp-count mpp-next mpp-bottom">'+i+"</span>"),e.$el.find(".mpp-time").last().find(".mpp-count-digit").append('<span class="mpp-count mpp-curr mpp-bottom">'+n+"</span>")})},initialDate:function(){var e=this,o={};return e.options.labels.forEach(function(e,t){o[e]=""}),o},extractDate:function(e){var o=this,t={};return o.options.labels.forEach(function(o,n){t[o]=e[o]}),t},diff:function(e,o){var t=this,n=[];return t.options.labels.forEach(function(t){e[t]!==o[t]&&n.push(t)}),n},getUnits:function(){var e=this,o=~MppCountdown.ALL;return e.options.labels.forEach(function(e,t){o|=+p.units[e]}),o},resetTimer:function(e){this.runTimer(!1,e)},getEndDate:function(e,o){var t,n=this,i=p.cookie.get(n.options.flagCookie);if("date_time"===n.options.type)t=o||e,null===i&&p.cookie.set(n.options.flagCookie,!1,365);else{var s=p.cookie.get(n.options.expireInCookie),i=p.cookie.get(n.options.flagCookie),a=new Date;if(null===s)if(null===i){var r=24*parseFloat(n.options.expireDays),c=60*parseFloat(n.options.expireHours),u=new Date(a.setHours(a.getHours()+r,a.getMinutes()+c)),l=(r+parseFloat(n.options.expireHours))/24;t=n.formatDate(u),p.cookie.set(n.options.expireInCookie,t,l),p.cookie.set(n.options.flagCookie,!1,365)}else t=o||a;else t=s}return"string"==typeof t&&(t=t.replace(/\s/,"T")),t instanceof Date?t:new Date(t)},runTimer:function(e,o){var t=this;clearInterval(t.timer);var n=t.getEndDate(e,o);t.timer=setInterval(function(){var e=Date.now(),o=MppCountdown(e,n,t.getUnits());t.options.newDate=t.extractDate(o),JSON.stringify(t.options.newDate)!==JSON.stringify(t.options.nextDate)&&(t.options.currDate=t.options.nextDate,t.options.nextDate=t.options.newDate,t.diff(t.options.currDate,t.options.nextDate).forEach(function(e){var o=t.$el.find(".mpp-time-"+e+" .mpp-count-digit");o.removeClass("mpp-flip"),o.find(".mpp-curr").text(t.parseDigit(t.options.currDate[e])),o.find(".mpp-next").text(t.parseDigit(t.options.nextDate[e])),setTimeout(function(){o.addClass("mpp-flip")},50)})),o.value<0&&(clearInterval(t.timer),t.processEndTimer(o))},100)},processEndTimer:function(e){var o=this;if(!o.options.resetTimer)return p.cookie.remove(o.options.flagCookie),p.cookie.remove(o.options.resetDateCookie),p.cookie.remove(o.options.resetSessionCookie),void o.onEndCountdown(e.end);if("auto"==o.options.resetType){var t=o.createCookieResetDate();return void o.resetTimer(t)}var n=p.cookie.get(o.options.resetDateCookie),i=p.cookie.get(o.options.resetSessionCookie);if(null!==n)return void o.resetTimer(n);if(null!==i)o.onEndCountdown(e.end);else{var s=p.cookie.get(o.options.flagCookie);if("true"===s){var t=o.createCookieResetDate();o.resetTimer(t),p.cookie.set(o.options.flagCookie,!1,365)}else"false"===s&&(o.createCookieResetSession(),p.cookie.set(o.options.flagCookie,!0,365),o.onEndCountdown(e.end))}},createResetDate:function(){var e=this,o=new Date,t=24*parseFloat(e.options.resetDays),n=60*parseFloat(e.options.resetHours),i=new Date(o.setHours(o.getHours()+t,o.getMinutes()+n));return e.formatDate(i)},createCookieResetDate:function(){var e=this,o=p.cookie.get(e.options.resetDateCookie);if(null===o){var t=parseFloat(e.options.resetDays)+parseFloat(e.options.resetHours)/24,n=e.createResetDate();return p.cookie.set(e.options.resetDateCookie,n,t),n}return o},createCookieResetSession:function(){var e=this,o=p.cookie.get(e.options.resetSessionCookie),t="session"==e.options.resetType?0:parseInt(e.options.resetAfterDays);null===o&&p.cookie.set(e.options.resetSessionCookie,!0,t)},formatDate:function(e){return e.getFullYear().toString()+"-"+(e.getMonth()+101).toString().substring(1)+"-"+(e.getDate()+100).toString().substring(1)+" "+("0"+e.getHours()).slice(-2).toString()+":"+("0"+e.getMinutes()).slice(-2).toString()+":"+("0"+e.getSeconds()).slice(-2).toString()},parseDigit:function(e){return this.options.fillZeros&&e<10?"0"+e.toString():e},onEndCountdown:function(e){var o=this;o.timerEnd||(o.timerEnd=!0,o.$el.find(".mpp-count").text(o.options.fillZeros?"00":"0"),o.$el.addClass(o.options.endClass),p.callEvents("finish",this,e))},callFunction:function(o,t,n){var i=this;e.isFunction(t)&&t.call(i,n.end),p.callEvents(o,i,n.end)}},p.on=function(e,o){p.callbacks.push({name:e,callback:o})},p.callEvents=function(e,o,t){p.callbacks.map(function(n){n.name===e&&"function"==typeof n.callback&&n.callback.call(this,o,t)})},p.cookie={set:function(e,o,n){if(!MPP_PUBLIC_JS.is_admin){var i="";if(n){n=parseFloat(n,10);var p=new Date;p.setTime(p.getTime()+24*n*60*60*1e3),i="; expires="+p.toGMTString()}t.cookie=e+"="+o+i+"; path=/"}},get:function(e){if(MPP_PUBLIC_JS.is_admin)return null;for(var o=e+"=",n=t.cookie.split(";"),i=0;i<n.length;i++){for(var p=n[i];" "===p.charAt(0);)p=p.substring(1,p.length);if(0===p.indexOf(o))return p.substring(o.length,p.length)}return null},remove:function(e){MPP_PUBLIC_JS.is_admin||this.set(e,"",-1)}},e.fn.MasterPopupsCountdown=function(o){return this.each(function(){e(this).data("MasterPopupsCountdown",new i(this,o))})},p}(jQuery,window,document);
